<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>RP Map</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />

  <!-- Base styling -->
  <link rel="stylesheet" href="/style.css?v=3" />

  <style>
    :root {
      --bg: #0b0e14;
      --panel: #121723;
      --panel-soft: #181e2d;
      --border: #242b3d;
      --text: #e6e8ef;
      --muted: #9aa3b2;
      --accent: #4fa3ff;
      --danger: #111; /* delete buttons */
      --radius: 14px;
      --blur: blur(14px);
    }

    * { box-sizing: border-box; }
    html, body {
      margin: 0;
      padding: 0;
      background: var(--bg);
      color: var(--text);
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      height: 100%;
      overflow: hidden;
    }

    /* === MAP CANVAS === */
    #map {
      position: absolute;
      inset: 0;
      background: #000;
      cursor: crosshair;
    }

    /* === LEFT DRAWER === */
    #drawer {
      position: fixed;
      top: 0;
      left: 0;
      height: 100%;
      width: min(92vw, 360px);
      background: linear-gradient(180deg, var(--panel), var(--panel-soft));
      border-right: 1px solid var(--border);
      z-index: 20;
      transform: translateX(0);
      transition: transform 0.25s ease;
      display: flex;
      flex-direction: column;
      backdrop-filter: var(--blur);
    }

    #drawer.closed {
      transform: translateX(-100%);
    }

    #drawerHeader {
      padding: 16px;
      border-bottom: 1px solid var(--border);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    #drawerHeader h1 {
      font-size: 16px;
      margin: 0;
    }

    #drawerContent {
      padding: 14px;
      overflow-y: auto;
      flex: 1;
    }

    .section {
      margin-bottom: 18px;
    }

    .section h3 {
      margin: 0 0 8px;
      font-size: 13px;
      color: var(--muted);
      text-transform: uppercase;
      letter-spacing: 0.06em;
    }

    input, select, button {
      width: 100%;
      background: #0f1320;
      border: 1px solid var(--border);
      color: var(--text);
      border-radius: 10px;
      padding: 10px 12px;
      font-size: 14px;
    }

    button {
      cursor: pointer;
    }

    button.primary {
      background: var(--accent);
      border-color: var(--accent);
      color: #000;
      font-weight: 700;
    }

    button.danger {
      background: var(--danger);
      border-color: #000;
      color: #fff;
    }

    /* === DRAWER TOGGLE === */
    #drawerToggle {
      position: fixed;
      top: 14px;
      left: 14px;
      z-index: 30;
      background: var(--panel);
      border: 1px solid var(--border);
      width: 42px;
      height: 42px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
    }

    /* === LOGIN BUTTON === */
    #authButton {
      position: fixed;
      bottom: 18px;
      left: 18px;
      z-index: 40;
      background: var(--panel);
      border: 1px solid var(--border);
      padding: 10px 14px;
      border-radius: 999px;
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 14px;
    }

    /* === INFO PANEL === */
    #infoPanel {
      position: fixed;
      bottom: 18px;
      right: 18px;
      width: min(92vw, 320px);
      background: var(--panel);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 14px;
      z-index: 25;
      backdrop-filter: var(--blur);
    }

    #infoPanel h3 {
      margin: 0 0 6px;
      font-size: 15px;
    }

    #infoPanel p {
      margin: 0;
      font-size: 13px;
      color: var(--muted);
    }

    @media (max-width: 720px) {
      #infoPanel {
        bottom: 72px;
      }
    }
  </style>
</head>

<body>

  <!-- MAP -->
  <div id="map"></div>

  <!-- DRAWER TOGGLE -->
  <button id="drawerToggle">‚ò∞</button>

  <!-- LEFT DRAWER -->
  <aside id="drawer">
    <div id="drawerHeader">
      <h1>üó∫ RP Map</h1>
      <button id="closeDrawer">‚úï</button>
    </div>

    <div id="drawerContent">

      <div class="section">
        <h3>Search</h3>
        <input placeholder="Search houses, POIs, roads‚Ä¶" />
      </div>

      <div class="section">
        <h3>Mode</h3>
        <select>
          <option>Inspect</option>
          <option disabled>Edit (login required)</option>
        </select>
      </div>

      <div class="section">
        <h3>Tools</h3>
        <button>‚ûï Add Marker</button>
        <button>üìè Draw Road</button>
        <button>üó∫ Draw Area</button>
      </div>

      <div class="section">
        <h3>Danger Zone</h3>
        <button class="danger">Delete Selected</button>
      </div>

    </div>
  </aside>

  <!-- INFO PANEL -->
  <div id="infoPanel">
    <h3>Nothing selected</h3>
    <p>Click a marker, road, or area.</p>
  </div>

  <!-- AUTH BUTTON -->
  <button id="authButton">
    üîí Login
  </button>

  <script>
    const drawer = document.getElementById("drawer");
    document.getElementById("drawerToggle").onclick = () =>
      drawer.classList.toggle("closed");
    document.getElementById("closeDrawer").onclick = () =>
      drawer.classList.add("closed");

    // Auth hook
    document.getElementById("authButton").onclick = async () => {
      window.location.href = "/api/login";
    };

    // Placeholder map init
    const map = document.getElementById("map");
    map.innerHTML = "<!-- map renderer mounts here -->";
  </script>

</body>
</html>
